webpackJsonp([8],{"7zck":function(t,e){},ACrd:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("v-navigation-drawer",{staticClass:"cyan lighten-2",attrs:{app:"",dark:"","disable-resize-watcher":""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-list",[t._l(t.items,function(e,s){return[n("v-list-tile",{key:s},[n("v-list-tile-content",[t._v("\n                        "+t._s(e.title)+"\n                    ")])],1),t._v(" "),n("v-divider",{key:"divider-"+s})]})],2)],1),t._v(" "),n("v-toolbar",{attrs:{app:"",color:"cyan darken-3",dark:""}},[n("v-toolbar-side-icon",{staticClass:"hidden-md-and-up",on:{click:function(e){t.drawer=!t.drawer}}}),t._v(" "),n("v-spacer",{staticClass:"hidden-md-and-up"}),t._v(" "),n("router-link",{attrs:{to:"/"}},[n("v-toolbar-title",{attrs:{"data-cy":"titleBtn"}},[t._v(t._s(t.appTitle)+"\n                "),t.isAuthenticated?n("span",{staticClass:"subheading"},[t._v("("+t._s(t.currentUser.company.name)+")")]):t._e()])],1),t._v(" "),t.isAuthenticated?n("div",{staticClass:"hidden-sm-and-down"},[n("v-btn",{staticClass:"hidden-sm-and-down nav-menu",attrs:{flat:"",to:"/risk-types","data-cy":"riskTypesMenuBtn"}},[t._v("Risk Types")]),t._v(" "),n("v-btn",{staticClass:"hidden-sm-and-down nav-menu",attrs:{flat:"",to:"/risks/add","data-cy":"risksMenuBtn"}},[t._v("Create Risk")])],1):t._e(),t._v(" "),n("v-spacer",{staticClass:"hidden-sm-and-down"}),t._v(" "),t.isAuthenticated?n("div",[n("span",{staticClass:"my-3"},[t._v("Hi, "+t._s(t.currentUser.email))]),t._v(" "),n("v-btn",{attrs:{flat:"",color:"white","data-cy":"logout"},on:{click:t.logout}},[t._v("Logout")])],1):n("div",{staticClass:"hidden-sm-and-down"},[n("v-btn",{attrs:{flat:"",to:"/sign-in","data-cy":"signinBtn"}},[t._v("Sign In")]),t._v(" "),n("v-btn",{staticClass:"nav-join",attrs:{flat:"",to:"/register","data-cy":"registerBtn"}},[t._v("Register")])],1)],1)],1)},staticRenderFns:[]};var i={name:"App",components:{AppNavigation:n("VU/8")({name:"AppNavigation",data:function(){return{appTitle:"BriteCore",drawer:!1,items:[{title:"Sign In"},{title:"Register"}]}},computed:{isAuthenticated:function(){return this.$store.getters.isAuthenticated},currentUser:function(){return this.$store.getters.user}},methods:{logout:function(){this.$store.dispatch("userSignOut")}}},a,!1,function(t){n("ACrd")},"data-v-49356592",null).exports}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",{attrs:{id:"app"}},[e("app-navigation"),this._v(" "),e("v-content",{attrs:{transition:"slide-x-transition"}},[e("router-view")],1)],1)},staticRenderFns:[]},o=n("VU/8")(i,r,!1,null,null,null).exports,u=n("/ocq"),c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",{staticStyle:{"max-height":"100vh"},attrs:{fluid:"","fill-height":""}},[e("v-layout",{attrs:{"justify-center":"","align-center":"",column:"","pa-5":""}},[e("div",{staticClass:"display-1 font-weight-black black--text text-xs-center mb-4"},[this._v("Welcome to my BriteCore Project")]),this._v(" "),e("div",{staticClass:"font-weight-black black--text text-xs-center"},[this._v("Built By:")]),this._v(" "),e("div",{staticClass:"font-weight-black black--text text-xs-center"},[this._v("Faniyi Olaoluwa")])])],1)},staticRenderFns:[]};var p={name:"home",components:{LandingPage:n("VU/8")({name:"LandingPage"},c,!1,function(t){n("pRP+")},"data-v-0477db92",null).exports}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("landing-page")],1)},staticRenderFns:[]},l=n("VU/8")(p,d,!1,null,null,null).exports,h=n("NYxO"),m=n("424j"),v=n("mtWM"),f=n.n(v);s.default.use(h.a);var k=new h.a.Store({plugins:[Object(m.a)({storage:{getItem:function(t){return localStorage.getItem(t)},setItem:function(t,e){return localStorage.setItem(t,e)},removeItem:function(t){return localStorage.removeItem(t)}}})],state:{api:"http://localhost:5000/api/v1",user:null,isAuthenticated:!1,companies:[],riskTypes:[]},mutations:{setRecipes:function(t,e){t.recipes=e},setUser:function(t,e){t.user=e},setIsAuthenticated:function(t,e){t.isAuthenticated=e},setUserRecipes:function(t,e){t.userRecipes=e},setCompanies:function(t,e){t.companies=e},setRiskTypes:function(t,e){t.riskTypes=e}},actions:{userLogin:function(t,e){var n=t.state,s=t.commit,a=e.email,i=e.password,r=n.api+"/users/login";f.a.post(r,{email:a,password:i}).then(function(t){var e=t.data.data,n=e.user;n.token=e.token,s("setUser",n),s("setIsAuthenticated",!0),y.push("/risk-types")}).catch(function(t){t.response&&401===t.response.status?alert(t.response.data.error):(s("setUser",null),s("setIsAuthenticated",!1),y.push("/"))})},userRegister:function(t,e){var n=t.state,s=t.commit,a=e.companyId,i=e.email,r=e.password,o=n.api+"/users/signup";f.a.post(o,{companyId:a,email:i,password:r}).then(function(t){var e=t.data.data,n=e.user;n.token=e.token,s("setUser",n),s("setIsAuthenticated",!0),y.push("/risk-types")}).catch(function(t){t.response&&409===t.response.status?alert(t.response.data.message):(s("setUser",null),s("setIsAuthenticated",!1),y.push("/"))})},userSignOut:function(t){var e=t.state,n=t.commit,s={"Content-Type":"application/json",Authorization:"Bearer "+e.user.token},a=e.api+"/users/logout";f.a.post(a,{},{headers:s}),n("setUser",null),n("setIsAuthenticated",!1),y.push("/")},updateRiskType:function(t,e){var n=t.state,s={"Content-Type":"application/json",Authorization:"Bearer "+n.user.token},a=n.api+"/risk-types/"+e.id;f.a.put(a,e,{headers:s}).then(function(){alert("Risk type updated successfully"),y.push("/risk-types")}).catch(function(t){t.response&&alert(t.response.data.message)})},addRiskType:function(t,e){var n=t.state,s={"Content-Type":"application/json",Authorization:"Bearer "+n.user.token},a=n.api+"/risk-types";f.a.post(a,e,{headers:s}).then(function(){alert("Risk type created successfully"),y.push("/risk-types")}).catch(function(t){t.response&&alert(t.response.data.message)})},addRisk:function(t,e){var n=t.state,s={"Content-Type":"application/json",Authorization:"Bearer "+n.user.token},a=n.api+"/risks";f.a.post(a,e,{headers:s}).then(function(){alert("Risk created successfully"),y.push("/risk-types")}).catch(function(t){t.response&&alert(t.response.data.message)})},deleteRiskType:function(t,e){var n=t.state,s={"Content-Type":"application/json",Authorization:"Bearer "+n.user.token},a=n.api+"/risk-types/"+e;f.a.delete(a,{headers:s}).then(function(){alert("Risk type deleted successfully"),y.go()}).catch(function(t){t.response&&alert(t.response.data.message)})},getCompanies:function(t){var e=t.state,n=t.commit,s=e.api+"/companies";return f.a.get(s).then(function(t){n("setCompanies",t.data.data)})},getRiskTypes:function(t){var e=t.state,n=t.commit,s=e.api+"/risk-types",a={"Content-Type":"application/json",Authorization:"Bearer "+e.user.token};return f.a.get(s,{headers:a}).then(function(t){n("setRiskTypes",t.data.data)})}},getters:{isAuthenticated:function(t){return null!==t.user&&void 0!==t.user},user:function(t){return t.user}}});s.default.use(u.a);var g=new u.a({mode:"history",base:Object({NODE_ENV:"production"}).BASE_URL,routes:[{path:"/",name:"home",component:l},{path:"/risks",name:"risks",component:function(){return n.e(0).then(n.bind(null,"6oJ7"))},meta:{authRequired:!0}},{path:"/risks/add",name:"risk",component:function(){return n.e(1).then(n.bind(null,"q2KQ"))},meta:{authRequired:!0}},{path:"/risk-types",name:"risktypes",component:function(){return n.e(3).then(n.bind(null,"08OJ"))},meta:{authRequired:!0}},{path:"/risk-types/add",name:"risktypeadd",component:function(){return n.e(5).then(n.bind(null,"c2v9"))},meta:{authRequired:!0}},{path:"/risk-types/:id/edit",name:"risktypeedit",component:function(){return n.e(6).then(n.bind(null,"QbE7"))},meta:{authRequired:!0}},{path:"/risk-types/:id/risks",name:"risktyperisks",component:function(){return n.e(0).then(n.bind(null,"6oJ7"))},meta:{authRequired:!0}},{path:"/sign-in",name:"signin",component:function(){return n.e(4).then(n.bind(null,"viRm"))}},{path:"/register",name:"register",component:function(){return n.e(2).then(n.bind(null,"tcoL"))}}]});g.beforeEach(function(t,e,n){t.matched.some(function(t){return t.meta.authRequired})?k.state.isAuthenticated?n():n({path:"/sign-in"}):n()});var y=g,_=n("3EgV"),b=n.n(_);n("7zck");s.default.use(b.a,{iconfont:"md"}),s.default.config.productionTip=!1,new s.default({el:"#app",router:y,store:k,components:{App:o},template:"<App/>"})},"pRP+":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.72e9b4f12a89f7a3eef7.js.map