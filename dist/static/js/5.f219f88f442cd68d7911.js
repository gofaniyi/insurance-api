webpackJsonp([5],{c2v9:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",[i("v-flex",{attrs:{"mt-3":"","mb-5":""}},[i("div",{staticClass:"col-sm-10"},[i("h2",[e._v("New Risk Type")])])]),e._v(" "),i("v-card",{staticClass:"pa-5"},[i("v-flex",{attrs:{xs6:"","offset-xs3":"","mb-5":""}},[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-text-field",{attrs:{counter:15,rules:e.nameRules,label:"Name",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),e.enableCustomAttSection?i("v-flex",{attrs:{"mt-3":""}},[i("v-toolbar",[i("v-toolbar-title",[e._v("Custom Attributes")]),e._v(" "),i("v-spacer")],1)],1):e._e(),e._v(" "),e.enableCustomAttSection?i("v-container",[i("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",[i("v-card-title",{staticClass:"body-2"},[e._v("Error")]),e._v(" "),i("v-divider"),e._v(" "),i("v-card-text",e._l(e.errors,function(t,n){return i("div",{key:n},[e._v("\n                                    "+e._s(t)+"\n                                ")])}),0),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary darken-1"},on:{click:function(t){e.dialog=!1}}},[e._v("Ok")])],1)],1)],1),e._v(" "),e._l(e.fields,function(t,n){return i("v-layout",{key:n},[i("v-flex",{attrs:{xs12:"",md7:""}},[i("v-text-field",{attrs:{label:"Field name",rules:[function(e){return!!e||"A field name is required"}],value:"",required:""},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"field.name"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md4:""}},[i("v-select",{attrs:{"menu-props":"right",items:e.items,"item-text":"name","item-value":"id",rules:[function(e){return!!e||"Field type is required"}],label:"Field Type",required:""},on:{change:function(t){return e.confirmChoices(t,n)}},model:{value:t.type,callback:function(i){e.$set(t,"type",i)},expression:"field.type"}}),e._v(" "),e.isChoices[n]?i("v-text-field",{attrs:{label:"e.g. blue,red,black",value:"",required:""},model:{value:t.choices,callback:function(i){e.$set(t,"choices",i)},expression:"field.choices"}}):e._e()],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md1:""}},[i("v-menu",{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[i("v-btn",e._g({attrs:{green:"",icon:""}},n),[i("v-icon",[e._v("more_vert")])],1)]}}],null,!0)},[e._v(" "),i("v-list",[i("v-list-tile",[i("v-checkbox",{attrs:{p3:"",label:"Required? "},model:{value:t.mandatory,callback:function(i){e.$set(t,"mandatory",i)},expression:"field.mandatory"}})],1)],1)],1)],1),e._v(" "),i("v-flex",{attrs:{xs12:"",md1:""}},[i("v-btn",{attrs:{icon:""}},[i("v-icon",{attrs:{color:"red"},on:{click:function(t){return e.removeField(n)}}},[e._v("delete")])],1)],1)],1)})],2):e._e(),e._v(" "),i("v-btn",{attrs:{outline:"",color:"success"},on:{click:e.addAttribute}},[i("v-icon",{attrs:{left:"",dark:""}},[e._v("add")]),e._v("Add Attribute\n                ")],1),e._v(" "),i("v-layout",{attrs:{"mt-4":""}},[i("v-btn",{attrs:{disabled:!e.valid,color:"success"},on:{click:e.validate}},[e._v("\n                        Save\n                    ")]),e._v(" "),i("v-btn",{attrs:{outline:"",color:"success",to:"/risk-types"}},[e._v("\n                        Cancel\n                    ")])],1)],1)],1)],1)],1)},staticRenderFns:[]},a=i("VU/8")({data:function(){return{blockRemoval:!0,enableCustomAttSection:!1,open:!1,fields:[],valid:!0,name:"",nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=15||"Name must be less than 15 characters"}],select:null,sides:[{title:"Required Field"}],items:[{name:"text",id:"text"},{name:"number",id:"number"},{name:"radio button",id:"radio button"},{name:"text area",id:"textarea"},{name:"dropdown",id:"dropdown"},{name:"date",id:"date"}],isChoices:[],errors:null,dialog:!1}},computed:{currentUser:function(){return this.$store.getters.user}},watch:{fields:function(){this.blockRemoval=this.fields.length<=1}},methods:{confirmChoices:function(e,t){var i=!1;["dropdown","radio button"].indexOf(e)>=0&&(i=!0),this.isChoices[t]=i},validate:function(){if(this.$refs.form.validate()){var e={name:this.name,customAttributes:[]},t=[],i=[],n=[];if(this.fields.forEach(function(e){n.includes(e.name)&&i.push(e.name+" is entered more than once");var a={key:e.name,label:e.name,inputControl:e.type,isRequired:e.mandatory||!1};n.push(e.name),["dropdown","radio button"].indexOf(e.type)>=0&&(e.choices?"string"==typeof e.choices?a.choices=e.choices?e.choices.split(","):[]:a.choices=e.choices:a.choices=[]),t.push(a)}),i.length>0)return this.errors=i,void(this.dialog=!0);e.customAttributes=t,this.$store.dispatch("addRiskType",e)}},addAttribute:function(){this.fields.filter(function(e){return null===e.name||null===e.type}).length>=1&&this.fields.length>0||(this.enableCustomAttSection=!0,this.fields.push({name:null,type:null,mandatory:null,choices:null}))},removeField:function(e){this.blockRemoval||this.fields.splice(e,1)}},mounted:function(){this.addAttribute()}},n,!1,null,null,null);t.default=a.exports}});
//# sourceMappingURL=5.f219f88f442cd68d7911.js.map